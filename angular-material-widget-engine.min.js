function mdWidgetEngineColumnDirective(){return{scope:!1,templateUrl:"/src/components/widgetEngine/templates/widgetEngineColumn.html",controller:function(e,n,i,t,d,o){var g=function(i){o(function(){var t=i.clientX,d=(t-n[0].children[0].offsetLeft)/e.configuration.width*100;e.configuration.columns[e.columnIndex+1]&&(e.configuration.columns[e.columnIndex+1].size-=d-e.column.size),e.column.size=d})},l=function(){d.unbind("mouseup",l),d.unbind("mousemove",g),e.callback("resize",e.configuration)};e.setupColumnResizing=function(e){event.preventDefault(),d.on("mouseup",l),d.on("mousemove",g)},e.addNewColumn=function(){var n=angular.copy(e.configuration.columns[e.columnIndex]);n.widgets=[],n.size="",o(function(){e.configuration.columns.splice(e.columnIndex+1,0,n)})},e.removeEmptyColumn=function(){var n=(e.configuration.columns.splice(e.columnIndex,1),0);if(e.configuration.columns.forEach(function(e){n+=e.size}),n<100)for(var i=e.columnIndex,t=e.configuration.columns.length,d=t-i,o=(100-n)/d,g=i-1;g<t;g++)e.configuration.columns[g].size+=o},n.on("dragenter",function(e){n.addClass("md-widget-engine-column-dashed"),e.stopPropagation()}),n.on("dragover",function(e){n.addClass("md-widget-engine-column-dashed"),e.stopPropagation(),e.preventDefault&&e.preventDefault()}),n.on("dragleave",function(e){n.removeClass("md-widget-engine-column-dashed"),e.stopPropagation()}),n.on("drop",function(i){var t=(i.dataTransfer.getData("Text")||i.dataTransfer.getData("text/plain")).split("::");if(e.columnIndex==t[0])return void n.removeClass("md-widget-engine-column-dashed");var g=(e.configuration.columns[t[0]].widgets[t[1]],e.configuration.columns[t[0]].widgets.splice(t[1],1)[0]);e.configuration.columns[e.columnIndex].widgets.push(g),n.removeClass("md-widget-engine-column-dashed"),d.find(".md-widget-engine-column-dashed").removeClass("md-widget-engine-column-dashed"),o(function(){e.$apply(),e.callback("update",e.configuration)},150)})},link:function(e,n,i,t){}}}function mdWidgetEngineWidgetTileDirective(){return{scope:!1,replace:!0,templateUrl:"/src/components/widgetEngine/templates/widgetEngineWidgetTile.html",controller:mdWidgetEngineWidgetTileDirectiveController(),link:function(e,n,i,t){}}}function mdWidgetEngineWidgetTileDragger(){return function(e,n,i,t){n.attr("draggable","true"),n.on("dragstart dragend",function(n){e.widget.sticky||(n=n.originalEvent||n,n._initiatedByDragger=!0)})}}function mdWidgetEngineDirective(){return{scope:{configuration:"=configuration",callback:"=callback"},templateUrl:"/src/components/widgetEngine/templates/widgetEngine.html",controller:function(e,n,i,t,d){d(function(){e.configuration.width=n[0].children[0].offsetWidth})},link:function(e,n,i,t){}}}function mdWidgetEngineWidgetTileDirectiveController(){var e={};return e._draggedTile=null,e.controller=function(n,i,t,d,o,g,l,c){n.fullscreen=!1,n.widget._internalSettings={},n.widget._internalSettings.trustedURL=l.trustAsResourceUrl(n.widget.content),n.toggleFullscreen=function(){n.fullscreen=!n.fullscreen},n.toggleSticky=function(){n.widget.sticky=!n.widget.sticky},n.removeWidget=function(e){var t=o.confirm().title("Are you sure?").textContent('Remove the "'+n.widget.title+'" widget?').ariaLabel("Are you sure you want to remove the widget").targetEvent(e).ok("Yes").cancel("Cancel");o.show(t).then(function(){i.addClass("md-widget-engine-widget-remove"),g(function(){n.configuration.columns[n.columnIndex].widgets.splice(n.widgetIndex,1)},200)},function(){})},i.on("dragstart",function(t){if(t.stopPropagation(),!t._initiatedByDragger||n.fullscreen)return t.dataTransfer.types&&t.dataTransfer.types.length||t.preventDefault(),void t.stopPropagation();i.addClass("md-widget-engine-widget-moving");var d=n.columnIndex+"::"+n.widgetIndex;t.dataTransfer.setData("Text",d),t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setDragImage(i[0],20,20),e._draggedTile=i}),i.on("dragenter",function(e){return e.stopPropagation(),!n.widget.sticky&&void(i.hasClass("md-widget-engine-widget-moving")||i.addClass("md-widget-engine-widget-dashed"))}),i.on("dragover",function(e){return e.stopPropagation(),!n.widget.sticky&&void(i.hasClass("md-widget-engine-widget-moving")||(i.addClass("md-widget-engine-widget-dashed"),e.preventDefault&&e.preventDefault()))}),i.on("dragleave",function(e){return e.stopPropagation(),!n.widget.sticky&&void i.removeClass("md-widget-engine-widget-dashed")}),i.on("dragend",function(e){return e.stopPropagation(),!n.widget.sticky&&(e=e.originalEvent||e,void i.removeClass("md-widget-engine-widget-moving"))}),i.on("drop",function(t){if(t.stopPropagation(),n.widget.sticky)return!1;var d=(t.dataTransfer.getData("Text")||t.dataTransfer.getData("text/plain")).split("::");if(n.columnIndex!=d[0]||n.widgetIndex!=d[1]){var o=[n.columnIndex,n.widgetIndex],g=n.configuration.columns[d[0]].widgets[d[1]],l=n.configuration.columns[o[0]].widgets[o[1]];n.configuration.columns[d[0]].widgets[d[1]]=l,n.configuration.columns[o[0]].widgets[o[1]]=g,e._draggedTile.removeClass("md-widget-engine-widget-dashed"),i.removeClass("md-widget-engine-widget-dashed"),setTimeout(function(){n.$apply(),n.callback("update",n.configuration)},150)}})},e.controller}angular.module("ngMdWidgetEngine",["ngMaterial","ngMdIcons"]),angular.module("ngMdWidgetEngine").directive("mdWidgetEngineWidgetDragger",mdWidgetEngineWidgetTileDragger).directive("mdWidgetEngineWidgetTile",mdWidgetEngineWidgetTileDirective).directive("mdWidgetEngineColumn",mdWidgetEngineColumnDirective).directive("mdWidgetEngine",mdWidgetEngineDirective),angular.module("ngMdWidgetEngine").run(["$templateCache",function(e){e.put("/src/components/widgetEngine/templates/widgetEngine.html",'<div class="md-widget-engine-container" ng-if="configuration.columns">\n    <div class="md-widget-engine">\n        <div layout="row" flex style="height: 100%">\n            <md-widget-engine-column \n                ng-repeat="(columnIndex, column) in configuration.columns" \n                column="column" \n                style="background-color: {{column.background}}; width: {{column.size}}%; min-width: 15%;"\n            ></md-widget-engine-column>\n        </div>\n    </div>\n</div><!-- md-widget-engine-container -->'),e.put("/src/components/widgetEngine/templates/widgetEngineColumn.html",'<div class="md-widget-engine-column" style="height:100%; position:relative">\n    \n    <span class="md-widget-engine-column-resizer" ng-mousedown="setupColumnResizing($event)" ng-show="configuration.columns.length-1 > columnIndex">\n    </span>\n    <div class="md-widget-engine-new-column-handler" ng-show="configuration.columns.length-1 > columnIndex">\n        <div ng-click="addNewColumn()" ng-show="column.widgets.length > 0 && configuration.columns.length < 6">\n            <md-tooltip md-direction="right">Add new column here</md-tooltip>\n            <ng-md-icon icon="add_circle" style="fill: black; font-weight: lighter" size="24" md-ink-ripple="#FFFFFF">\n        </div>\n        <div ng-click="removeEmptyColumn()" ng-show="column.widgets.length == 0">\n            <md-tooltip md-direction="left">Remove this column</md-tooltip>\n            <ng-md-icon icon="remove_circle" style="fill: black; font-weight: lighter" size="24" md-ink-ripple="#FFFFFF">\n        </div>\n    </div>\n\n    <div class="md-widget-engine-widget-tiles-container">\n        <md-widget-engine-widget-tile ng-repeat="(widgetIndex, widget) in column.widgets" widget="widget" widgetIndex="widgetIndex"></md-widget-engine-widget-tile>\n    </div>\n</div><!-- md-widget-engine-column -->'),e.put("/src/components/widgetEngine/templates/widgetEngineWidgetTile.html",'<div class="md-widget-engine-widget-tile-container {{fullscreen ? \'md-widget-engine-widget-fullscreen\' : \'\'}}">\n    <div class="md-widget-engine-widget-tile md-whiteframe-2dp">\n\n        <div class="md-widget-engine-widget-tile-title-container">\n            <md-toolbar class="md-whiteframe-2dp">\n                <div class="md-toolbar-tools">\n                    <div class="md-widget-engine-widget-tile-title">\n                        <span style="cursor: pointer" md-widget-engine-widget-dragger>{{widget.title || \'Widget\'}}</span>\n                    </div>\n                    <span flex></span>\n                    <div class="md-widget-engine-widget-tile-controls-container" >\n                        <div class="md-widget-engine-widget-tile-control" ng-mouseup="removeWidget($event)">\n                            <span class="md-widget-engine-widget-close-control">\n                                <ng-md-icon icon="close" style="fill: lightwhite; font-weight: lighter" size="24">\n                                    <md-tooltip md-direction="bottom">Remove this widget</md-tooltip>\n                                </ng-md-icon>\n                            </span>\n                        </div>\n                        <div class="md-widget-engine-widget-tile-control" ng-click="toggleSticky()" ng-show="widget.stickyControl">\n                            <span class="md-widget-engine-widget-sticky-control">\n                                <ng-md-icon icon="lock_open" style="fill: lightwhite; font-weight: lighter" size="24" ng-if="!widget.sticky">\n                                    <md-tooltip md-direction="bottom">Make this widget sticky</md-tooltip>\n                                </ng-md-icon>\n                                <ng-md-icon icon="lock" style="fill: lightwhite; font-weight: lighter" size="24" ng-if="widget.sticky">\n                                    <md-tooltip md-direction="bottom">Make this widget non-sticky</md-tooltip>\n                                </ng-md-icon>\n                            </span>\n                        </div>\n                        <div class="md-widget-engine-widget-tile-control" ng-click="toggleFullscreen()">\n                            <span class="md-widget-engine-widget-fullscreen-control">\n                                <ng-md-icon icon="fullscreen" style="fill: lightwhite; font-weight: lighter" size="24">\n                                    <md-tooltip md-direction="bottom">Toggle fullscreen mode</md-tooltip>\n                                </ng-md-icon>\n                            </span>\n                        </div>\n                    </div>\n                </div><!-- md-toolbar-tools -->\n            </md-toolbar>\n        </div>\n\n        <div class="md-widget-engine-widget-tile-content-container">\n            <md-content>\n                <div class="md-widget-engine-widget-tile-content resize-vertical" style="min-height:{{widget.minHeight}}px; max-height:{{widget.maxHeight}}">\n                    <div ng-switch on="widget.type">\n                        <div ng-switch-when="include">\n                            <ng-include src="widget.content"></ng-include>\n                        </div><!-- ng-switch-when -->\n\n                        <div ng-switch-when="iframe">\n                            <iframe ng-src="{{widget._internalSettings.trustedURL}}" frameborder=0 style="border:0px; width:100%; height:auto"></iframe>\n                        </div><!-- ng-switch-when -->\n\n                    </div> <!-- ng-switch -->\n                </div>\n            </md-content>    \n        </div>\n\n    </div><!-- md-widget-engine-widget-tile -->\n</div><!-- md-widget-engine-widget-tile-container -->')}]);