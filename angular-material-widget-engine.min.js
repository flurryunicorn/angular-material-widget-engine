function mdWidgetEngineColumnDirective(){return{scope:!1,templateUrl:"/src/components/widgetEngine/templates/widgetEngineColumn.html",controller:function(n,e,i,t,d,o){var g=function(i){o(function(){var t=i.clientX,d=(t-e[0].children[0].offsetLeft)/n.configuration.width*100;n.configuration.columns[n.columnIndex+1]&&(n.configuration.columns[n.columnIndex+1].size-=d-n.column.size),n.column.size=d})},l=function(){d.unbind("mouseup",l),d.unbind("mousemove",g),n.callback("resize",n.configuration)};n.setupColumnResizing=function(n){event.preventDefault(),d.on("mouseup",l),d.on("mousemove",g)},n.addNewColumn=function(){var e=angular.copy(n.configuration.columns[n.columnIndex]);e.widgets=[],e.size="",o(function(){n.configuration.columns.splice(n.columnIndex+1,0,e)})},n.removeEmptyColumn=function(){var e=(n.configuration.columns.splice(n.columnIndex,1),0);if(n.configuration.columns.forEach(function(n){e+=n.size}),e<100)for(var i=n.columnIndex,t=n.configuration.columns.length,d=t-i,o=(100-e)/d,g=i-1;g<t;g++)n.configuration.columns[g].size+=o},e.on("dragenter",function(n){e.addClass("md-widget-engine-column-dashed"),n.stopPropagation()}),e.on("dragover",function(n){e.addClass("md-widget-engine-column-dashed"),n.stopPropagation(),n.preventDefault&&n.preventDefault()}),e.on("dragleave",function(n){e.removeClass("md-widget-engine-column-dashed"),n.stopPropagation()}),e.on("drop",function(i){var t=(i.dataTransfer.getData("Text")||i.dataTransfer.getData("text/plain")).split("::");if(n.columnIndex==t[0])return void e.removeClass("md-widget-engine-column-dashed");var g=(n.configuration.columns[t[0]].widgets[t[1]],n.configuration.columns[t[0]].widgets.splice(t[1],1)[0]);n.configuration.columns[n.columnIndex].widgets.push(g),e.removeClass("md-widget-engine-column-dashed"),d.find(".md-widget-engine-column-dashed").removeClass("md-widget-engine-column-dashed"),o(function(){n.$apply(),n.callback("update",n.configuration)},150)})},link:function(n,e,i,t){}}}function mdWidgetEngineWidgetTileDirective(){return{scope:!1,replace:!0,templateUrl:"/src/components/widgetEngine/templates/widgetEngineWidgetTile.html",controller:mdWidgetEngineWidgetTileDirectiveController(),link:function(n,e,i,t){}}}function mdWidgetEngineWidgetTileDragger(){return function(n,e,i,t){e.attr("draggable","true"),e.on("dragstart dragend",function(e){n.widget.sticky||(e=e.originalEvent||e,e._initiatedByDragger=!0)})}}function mdWidgetEngineDirective(){return{scope:{configuration:"=configuration",callback:"=callback"},templateUrl:"/src/components/widgetEngine/templates/widgetEngine.html",controller:function(n,e,i,t,d){d(function(){n.configuration.width=e[0].children[0].offsetWidth})},link:function(n,e,i,t){}}}function mdWidgetEngineWidgetTileDirectiveController(){var n={};return n._draggedTile=null,n.controller=function(e,i,t,d,o,g,l,c){e.fullscreen=!1,e.widget._internalSettings={},e.widget._internalSettings.trustedURL=l.trustAsResourceUrl(e.widget.content),e.toggleFullscreen=function(){e.fullscreen=!e.fullscreen},e.toggleSticky=function(){e.widget.sticky=!e.widget.sticky},e.removeWidget=function(n){var t=o.confirm().title("Are you sure?").textContent('Remove the "'+e.widget.title+'" widget?').ariaLabel("Are you sure you want to remove the widget").targetEvent(n).ok("Yes").cancel("Cancel");o.show(t).then(function(){i.addClass("md-widget-engine-widget-remove"),g(function(){e.configuration.columns[e.columnIndex].widgets.splice(e.widgetIndex,1)},200)},function(){})},i.on("dragstart",function(t){if(t.stopPropagation(),!t._initiatedByDragger||e.fullscreen)return t.dataTransfer.types&&t.dataTransfer.types.length||t.preventDefault(),void t.stopPropagation();i.addClass("md-widget-engine-widget-moving");var d=e.columnIndex+"::"+e.widgetIndex;t.dataTransfer.setData("Text",d),t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setDragImage(i[0],20,20),n._draggedTile=i}),i.on("dragenter",function(n){return n.stopPropagation(),!e.widget.sticky&&void(i.hasClass("md-widget-engine-widget-moving")||i.addClass("md-widget-engine-widget-dashed"))}),i.on("dragover",function(n){return n.stopPropagation(),!e.widget.sticky&&void(i.hasClass("md-widget-engine-widget-moving")||(i.addClass("md-widget-engine-widget-dashed"),n.preventDefault&&n.preventDefault()))}),i.on("dragleave",function(n){return n.stopPropagation(),!e.widget.sticky&&void i.removeClass("md-widget-engine-widget-dashed")}),i.on("dragend",function(n){return n.stopPropagation(),!e.widget.sticky&&(n=n.originalEvent||n,void i.removeClass("md-widget-engine-widget-moving"))}),i.on("drop",function(t){if(t.stopPropagation(),e.widget.sticky)return!1;var d=(t.dataTransfer.getData("Text")||t.dataTransfer.getData("text/plain")).split("::");if(e.columnIndex!=d[0]||e.widgetIndex!=d[1]){var o=[e.columnIndex,e.widgetIndex],g=e.configuration.columns[d[0]].widgets[d[1]],l=e.configuration.columns[o[0]].widgets[o[1]];e.configuration.columns[d[0]].widgets[d[1]]=l,e.configuration.columns[o[0]].widgets[o[1]]=g,n._draggedTile.removeClass("md-widget-engine-widget-dashed"),i.removeClass("md-widget-engine-widget-dashed"),setTimeout(function(){e.$apply(),e.callback("update",e.configuration)},150)}})},n.controller}angular.module("ngMdWidgetEngine",["ngMaterial"]),angular.module("ngMdWidgetEngine").directive("mdWidgetEngineWidgetDragger",mdWidgetEngineWidgetTileDragger).directive("mdWidgetEngineWidgetTile",mdWidgetEngineWidgetTileDirective).directive("mdWidgetEngineColumn",mdWidgetEngineColumnDirective).directive("mdWidgetEngine",mdWidgetEngineDirective),angular.module("ngMdWidgetEngine").run(["$templateCache",function(n){n.put("/src/components/widgetEngine/templates/widgetEngine.html",'<div class="md-widget-engine-container" ng-if="configuration.columns">\n    <div class="md-widget-engine">\n        <div layout="row" flex style="height: 100%">\n            <md-widget-engine-column \n                ng-repeat="(columnIndex, column) in configuration.columns" \n                column="column" \n                style="background-color: {{column.background}}; width: {{column.size}}%; min-width: 15%;"\n            ></md-widget-engine-column>\n        </div>\n    </div>\n</div><!-- md-widget-engine-container -->'),n.put("/src/components/widgetEngine/templates/widgetEngineColumn.html",'<div class="md-widget-engine-column" style="height:100%; position:relative">\n    \n    <span class="md-widget-engine-column-resizer" ng-mousedown="setupColumnResizing($event)" ng-show="configuration.columns.length-1 > columnIndex">\n    </span>\n    <div class="md-widget-engine-new-column-handler" ng-show="configuration.columns.length-1 > columnIndex">\n        <div ng-click="addNewColumn()" ng-show="column.widgets.length > 0 && configuration.columns.length < 6" style="outline: none; border: 0px;">\n            <md-icon class="material-icons md-dark md-24" style="outline: none">add_circle</md-icon>\n            <md-tooltip md-direction="right">Add new column here</md-tooltip>\n        </div>\n        <div ng-click="removeEmptyColumn()" ng-show="column.widgets.length == 0" style="outline: none; border: 0px;">\n            <md-icon class="material-icons md-dark md-24">remove_circle</md-icon>\n            <md-tooltip md-direction="left">Remove this column</md-tooltip>\n        </div>\n    </div>\n\n    <div class="md-widget-engine-widget-tiles-container">\n        <md-widget-engine-widget-tile ng-repeat="(widgetIndex, widget) in column.widgets" widget="widget" widgetIndex="widgetIndex"></md-widget-engine-widget-tile>\n    </div>\n</div><!-- md-widget-engine-column -->'),n.put("/src/components/widgetEngine/templates/widgetEngineWidgetTile.html",'<div class="md-widget-engine-widget-tile-container {{fullscreen ? \'md-widget-engine-widget-fullscreen\' : \'\'}}">\n    <div class="md-widget-engine-widget-tile md-whiteframe-2dp">\n\n        <div class="md-widget-engine-widget-tile-title-container">\n            <md-toolbar class="md-whiteframe-2dp">\n                <div class="md-toolbar-tools">\n                    <div class="md-widget-engine-widget-tile-title">\n                        <span style="cursor: pointer" md-widget-engine-widget-dragger>{{widget.title || \'Widget\'}}</span>\n                    </div>\n                    <span flex></span>\n                    <div class="md-widget-engine-widget-tile-controls-container" >\n                        <div class="md-widget-engine-widget-tile-control" ng-mouseup="removeWidget($event)">\n                            <span class="md-widget-engine-widget-close-control">\n                                <md-icon class="material-icons md-light md-24">\n                                    close\n                                    <md-tooltip md-direction="bottom">Remove this widget</md-tooltip>\n                                </md-icon>\n                            </span>\n                        </div>\n                        <div class="md-widget-engine-widget-tile-control" ng-click="toggleSticky()" ng-show="widget.stickyControl">\n                            <span class="md-widget-engine-widget-sticky-control">\n                                <md-icon class="material-icons md-light md-24" ng-if="!widget.sticky">\n                                    lock_open\n                                    <md-tooltip md-direction="bottom">Make this widget sticky</md-tooltip>\n                                </md-icon>\n                                <md-icon class="material-icons md-light md-24" ng-if="widget.sticky">\n                                    lock\n                                    <md-tooltip md-direction="bottom">Make this widget non-sticky</md-tooltip>\n                                </md-icon>\n                            </span>\n                        </div>\n                        <div class="md-widget-engine-widget-tile-control" ng-click="toggleFullscreen()">\n                            <span class="md-widget-engine-widget-fullscreen-control">\n                                <md-icon class="material-icons md-light md-24">\n                                    fullscreen\n                                    <md-tooltip md-direction="bottom">Toggle fullscreen mode</md-tooltip>\n                                </md-icon>\n                            </span>\n                        </div>\n                    </div>\n                </div><!-- md-toolbar-tools -->\n            </md-toolbar>\n        </div>\n\n        <div class="md-widget-engine-widget-tile-content-container">\n            <md-content>\n                <div class="md-widget-engine-widget-tile-content resize-vertical" style="min-height:{{widget.minHeight}}px; max-height:{{widget.maxHeight}}">\n                    <div ng-switch on="widget.type">\n                        <div ng-switch-when="include">\n                            <ng-include src="widget.content"></ng-include>\n                        </div><!-- ng-switch-when -->\n\n                        <div ng-switch-when="iframe">\n                            <iframe ng-src="{{widget._internalSettings.trustedURL}}" frameborder=0 style="border:0px; width:100%; height:auto"></iframe>\n                        </div><!-- ng-switch-when -->\n\n                    </div> <!-- ng-switch -->\n                </div>\n            </md-content>    \n        </div>\n\n    </div><!-- md-widget-engine-widget-tile -->\n</div><!-- md-widget-engine-widget-tile-container -->')}]);